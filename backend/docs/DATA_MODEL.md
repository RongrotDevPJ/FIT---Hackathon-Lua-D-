# üìò Data Model ‚Äì LonganLink Backend

‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ Firestore ‡πÄ‡∏õ‡πá‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å  
‡πÇ‡∏î‡∏¢‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö collection ‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 4 ‡∏ï‡∏±‡∏ß ‡∏Ñ‡∏∑‡∏≠ `users`, `orders`, `factories`, ‡πÅ‡∏•‡∏∞ `negotiations`  
(‡πÉ‡∏ô production ‡∏≠‡∏≤‡∏à‡∏£‡∏ß‡∏° `factories` ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô `users` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ role)

---

## üßç‚Äç‚ôÇÔ∏è Collection: users
‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£ ‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô

| Field | Type | Description |
|--------|------|-------------|
| id | string (PK) | ‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ |
| name | string | ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ |
| role | string | `'farmer'` / `'factory'` / `'admin'` |
| province | string | ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà |
| amphoe | string | ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ |
| phone | string | ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå |
| createdAt | timestamp | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£ |

---

## üåæ Collection: orders
‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏ù‡∏±‡πà‡∏á‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£ (sell) ‡πÅ‡∏•‡∏∞‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô (buy)

| Field | Type | Description |
|--------|------|-------------|
| id | string (PK) | ‡∏£‡∏´‡∏±‡∏™‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå |
| type | string | `'sell'` ‡∏´‡∏£‡∏∑‡∏≠ `'buy'` |
| ownerId | string (FK ‚Üí users.id) | ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå |
| province | string | ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î |
| amphoe | string | ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ |
| grade | string | ‡πÄ‡∏Å‡∏£‡∏î‡∏•‡∏≥‡πÑ‡∏¢ |
| amountKg | number | ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì (‡∏Å‡∏Å.) |
| requestedPrice | number | ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡πâ‡∏á |
| quota | number (optional) | ‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠ (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô) |
| status | string | `'open'`, `'matched'`, `'closed'` |
| createdAt | timestamp | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á |

---

## üè≠ Collection: factories (optional)
‡∏Å‡∏£‡∏ì‡∏µ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô

| Field | Type | Description |
|--------|------|-------------|
| id | string | ‡∏£‡∏´‡∏±‡∏™‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô |
| name | string | ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô |
| type | string | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (‡∏≠‡∏ö‡πÅ‡∏´‡πâ‡∏á / ‡∏ô‡πâ‡∏≥‡∏•‡∏≥‡πÑ‡∏¢ / ‡∏õ‡∏∏‡πã‡∏¢ ‡∏Ø‡∏•‡∏Ø) |
| province | string | ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î |
| amphoe | string | ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ |
| avgPrice | number | ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠ (‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.) |
| contactPhone | string | ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ |

---

## ü§ù Collection: negotiations
‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≠‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå

| Field | Type | Description |
|--------|------|-------------|
| id | string (PK) | ‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏á |
| orderId | string (FK ‚Üí orders.id) | ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á |
| fromId | string (FK ‚Üí users.id) | ‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏á |
| toId | string (FK ‚Üí users.id) | ‡∏ú‡∏π‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏á |
| status | string | `'pending'`, `'accepted'`, `'rejected'`, `'counter'` |
| requestedPrice | number | ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏ô‡∏≠ |
| finalPrice | number (optional) | ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏Å‡∏•‡∏á‡∏à‡∏£‡∏¥‡∏á |
| updatedAt | timestamp | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î |

---

### üîó ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå (ER Summary)
